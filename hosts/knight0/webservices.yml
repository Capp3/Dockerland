services:
  homepage:
    image: ghcr.io/gethomepage/homepage:latest
    container_name: web_homepage
    tags:
      - maint
    restart: unless-stopped
    ports:
      - ${HOMEPAGE_PORT:-3000}:3000
    volumes:
      - ${DATA_DIR}/homepage:/app/config # Make sure your local config directory exists
      - /var/run/docker.sock:/var/run/docker.sock # (optional) For docker integrations
    environment:
      - PUID=${PUID}
      - PGID=${PGID}
      - HOMEPAGE_ALLOWED_HOSTS=home.${DOMAIN_NAME}

  cloudflare-ddns-capparelli:
    container_name: ddns_capparelli
    image: oznu/cloudflare-ddns:latest
    restart: always
    networks:
      k0_proxy:
    environment:
      - API_KEY=${CFDDNS0}
      - ZONE=${CFDDN_ZONE_0}

  pihole:
    container_name: pihole
    image: pihole/pihole:latest
    tags:
      - maint
    ports:
      - '53:53/tcp'
      - '53:53/udp'
      - '80:80/tcp'
      - '443:443/tcp'
      # Uncomment the below if using Pi-hole as your DHCP Server
      #- "67:67/udp"
      # Uncomment the line below if you are using Pi-hole as your NTP server
      #- "123:123/udp"
    environment:
      TZ: ${TZ}
      FTLCONF_webserver_api_password: 'gYLR!e*1^9Lz*O'
      FTLCONF_dns_listeningMode: 'all'
    volumes:
      - ${DATA_DIR}/etc-pihole:/etc/pihole
    cap_add:
      - NET_ADMIN
      - SYS_TIME
      - SYS_NICE
    networks:
      macvlan_network:
        ipv4_address: 192.168.1.254
